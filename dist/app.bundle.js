(()=>{"use strict";class e{createTag(e){return $("<img></img>").attr("src","src/Sample Photos/"+e.photographerId+"/"+e.image).attr("alt",e.alt).attr("role","button").addClass("media")}}class t{createTag(e){return $("<video></video>").attr("controls","controls").attr("src","src/Sample Photos/"+e.photographerId+"/"+e.video).attr("role","button").addClass("media")}}class a{getMedia(a){let s=null;return a.hasOwnProperty("image")?s=new e:a.hasOwnProperty("video")&&(s=new t),s.createTag(a)}}class s{constructor(){this.currentIndex=0}init(e,t){return Array.from(document.getElementsByClassName("media")).forEach(((a,s)=>a.addEventListener("click",(()=>{let a=$("#carousel-media"),i=$("#carousel-media-name");this.currentIndex=s,document.getElementById("carousel").style.display="block",a.html(e[s]),i.html(t[s])})))),this.previous(document.querySelector(".left-arrow-carousel"),e,t),this.next(document.querySelector(".right-arrow-carousel"),e,t),this.close(),this.keyboard(e,t),this}previous(e,t,a){e.addEventListener("click",(()=>{this.currentIndex-=1;let e=$("#carousel-media"),s=$("#carousel-media-name");this.currentIndex<0&&(this.currentIndex=t.length-1,this.currentIndex=a.length-1),e.html(t[this.currentIndex]),s.html(a[this.currentIndex])}))}next(e,t,a){e.addEventListener("click",(()=>{this.currentIndex+=1;let e=$("#carousel-media"),s=$("#carousel-media-name");this.currentIndex>a.length-1&&(this.currentIndex=0),e.html(t[this.currentIndex]),s.html(a[this.currentIndex])}))}close(){document.querySelector(".close-carousel-icon").addEventListener("click",(()=>{document.getElementById("carousel").style.display="none"}))}keyboard(e,t){document.addEventListener("keydown",(a=>{let s=$("#carousel-media"),i=$("#carousel-media-name");"Escape"==a.code?document.getElementById("carousel").style.display="none":"ArrowRight"==a.code?(this.currentIndex+=1,this.currentIndex>t.length-1&&(this.currentIndex=0),s.html(e[this.currentIndex]),i.html(t[this.currentIndex])):"ArrowLeft"==a.code&&(this.currentIndex-=1,this.currentIndex<0&&(this.currentIndex=e.length-1,this.currentIndex=t.length-1),s.html(e[this.currentIndex]),i.html(t[this.currentIndex]))}))}}class i{constructor(){this.totalLike=0}getGallery(e){const t=window.location.search.split("id=")[1];let i=new a,r=[],l=[];return e.forEach((e=>{let a=i.getMedia(e);t==e.photographerId&&($("#medias").append($('<article class="media-container"></article>').append($('<a href="#" title="'+e.title+'"></a>').append($('<div class="media-div" aria-label="'+e.title+',closeup view"></div>').append(a)),$('<div class="media-infos"></div>').append($('<h2 class="media-title">'+e.title+"</h2>"),$('<div class="media-like"></div>').append($('<span class="media-like-number-'+e.id+'">'+e.likes+"</span>"),$('<i class="fas fa-heart heart-btn-'+e.id+'" aria-label="likes" role="button"></i>'))))),this.liked(e),this.totalLike+=parseInt(e.likes),r.push(a),l.push(e.title),(new s).init(r,l))})),this}liked(e){$(".heart-btn-"+e.id).on("click",(()=>{let t=$(".media-like-number-"+e.id),a=parseInt(t.text());a++,t.text(a);let s=$("#total-likes"),i=parseInt(s.text());i++,s.text(i)}))}}class r{scrollButton(){window.addEventListener("scroll",(()=>{window.scrollY>=130?$("#back-home").css("display","block"):$("#back-home").css("display","none")}))}dropDownMenu(e){const t=["[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'],a=document.querySelectorAll('[aria-haspopup="listbox"]'),s=document.querySelector("#profil");let i=document.getElementsByClassName("drop-btn"),r=document.getElementsByClassName("arrow-up-close");i&&(i[0].addEventListener("click",(()=>{a.forEach((e=>{let a=document.getElementById(e.getAttribute("aria-controls"));const i=a.querySelectorAll(t),r=i[0],l=i[i.length-1];a.setAttribute("aria-hidden",!1),a.style.display="block",s.setAttribute("aria-hidden",!0),r&&window.setTimeout((()=>{r.focus(),i.forEach((e=>{e.addEventListener&&e.addEventListener("keydown",(e=>{9===e.which&&(e.shiftKey?e.target===r&&(e.preventDefault(),l.focus()):e.target===l&&(e.preventDefault(),r.focus()))}))}))}),100)}))})),this.sortMedias(e,s)),r&&r[0].addEventListener("click",(()=>{optionSort[0].style.display="none"}))}sortMedias(e,t){let a=[],s=e.media,i=document.querySelector(".drop-btn"),r=document.getElementsByClassName("option-sort");Array.from(document.getElementsByClassName("sort")).forEach(((e,l)=>e.addEventListener("click",(()=>{r[0].style.display="none",0==l?(i.innerHTML='Popularité <span class="fas fa-chevron-down" role=\'button\' aria-hidden="true"></span>',a=s.sort(((e,t)=>t.likes-e.likes))):1==l?(i.innerHTML='Date <span class="fas fa-chevron-down" role=\'button\' aria-hidden="true"></span>',a=s.sort(((e,t)=>new Date(e.date)-new Date(t.date)))):2==l&&(i.innerHTML='Titre <span class="fas fa-chevron-down" role=\'button\' aria-hidden="true"></span>',a=s.sort(((e,t)=>e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:void 0))),this.displaySortMedia(a),t.setAttribute("aria-hidden",!1)}))))}displaySortMedia(e){document.getElementById("medias").innerHTML="",(new i).getGallery(e)}selectByTags(){let e=document.querySelectorAll(".card_user");document.querySelector("#nav ul").addEventListener("click",(t=>{-1===t.target.classList.value.indexOf("activated")?t.target.classList.add("activated"):t.target.classList.remove("activated"),this.diplayArticle(e)}))}redirectedByTag(){if(""!=window.location.hash){let e=document.querySelectorAll(".card_user"),t=window.location.hash.split("#")[1];console.log(t);let a=document.getElementById(t);console.log(a.firstChild),a.firstChild.classList.add("activated"),console.log(a),this.diplayArticle(e)}}diplayArticle(e){e.forEach((e=>{this.isAvtivatedFilters(e)?e.style.display="block":e.style.display="none"}))}isAvtivatedFilters(e){let t=this.getActivatedFilters(),a=e.classList.value.split(" ");return t.filter((e=>a.includes(e))).length>=1||0==t.length}getActivatedFilters(){let e=document.querySelectorAll("#nav ul a li.activated"),t=[];return e.forEach((e=>{t.push(e.getAttribute("data-filter"))})),t}toUpperCaseFirst(e){return(e+"").charAt(0).toUpperCase()+e.substr(1)}}class l{getPhotographers(e){let t=e.photographers;return t.forEach((e=>{var t="";e.tags.forEach((e=>{t+='<a class="tag"><li>'+(new r).toUpperCaseFirst(e)+"</li></a>"})),$("#photographers").append($("<article></article>").addClass("card_user "+e.tags.join(" ")).append($('<a href="photographers.html?id='+e.id+'" title="'+e.name+'"></a>').addClass("card_user_link-profil").append($('<div id="'+e.id+'" class="img_user '+e.id+'"></div>'),$("<h2>"+e.name+"</h2>").addClass("name_user")),$("<div></div>").addClass("text_user").append($("<p>"+e.city+", "+e.country+"</p>").addClass("loc_user"),$("<p>"+e.tagline+"</p>").addClass("tagline_user"),$("<p>"+e.price+"€/jour</p>").addClass("price_user")),$("<div></div>").addClass("tags").append($("<ul></ul>").append(t))));var a="src/Sample Photos/Photos profil/"+e.portrait,s=new Image;s.onload=function(){document.getElementById(e.id).src=s.src,s.height<=s.width?$("."+e.id).addClass("imgP"):s.height>s.width&&$("."+e.id).addClass("imgL"),$("."+e.id).append(s)},s.src=a})),(new r).selectByTags(),(new r).scrollButton(),t}getTags(e){e.tags.forEach((e=>{$("#nav ul").append($("<a></a>").addClass("tag-link").attr("href","#").attr("id",e).append($("<li></li>").attr("data-filter",e).append((new r).toUpperCaseFirst(e))))}))}}class n{initialize(e){const t=document.querySelectorAll('[aria-haspopup="dialog"]'),a=document.querySelector("#profil"),s=["[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'],i=function(e){const t=e.querySelectorAll(s),i=t[0],r=t[t.length-1];e.setAttribute("aria-hidden",!1),e.style.display="block",a.setAttribute("aria-hidden",!0),i&&window.setTimeout((()=>{i.focus(),t.forEach((e=>{e.addEventListener&&e.addEventListener("keydown",(e=>{9===e.which&&(e.shiftKey?e.target===i&&(e.preventDefault(),r.focus()):e.target===r&&(e.preventDefault(),i.focus()))}))}))}),100)},r=function(e,t){e.setAttribute("aria-hidden",!0),e.style.display="none",a.setAttribute("aria-hidden",!1),t.focus()};t.forEach((t=>{const a=document.getElementById(t.getAttribute("aria-controls")),s=document.getElementById("close-form"),l=a.querySelectorAll("[data-dismiss]");this.getPhotographerName(e),t.addEventListener("click",(e=>{e.preventDefault(),i(a)})),t.addEventListener("keydown",(e=>{13===e.which&&(e.preventDefault(),i(a))})),a.addEventListener("keydown",(e=>{27===e.which&&r(a,t)})),s.addEventListener("click",(e=>{r(a,t)})),l.forEach((e=>{const a=document.getElementById(e.dataset.dismiss);e.addEventListener("click",(e=>{e.preventDefault(),r(a,t)}))})),window.addEventListener("click",(e=>{e.target===a&&r(a,t)}))}))}getPhotographerName(e){let t=window.location.search.split("id=")[1],a=t?e.filter((e=>e.id==t)):e;$("#form-name").append(a[0].name)}}class o{validate(){let e=document.getElementById("contact-form"),t=document.getElementById("first-name"),a=document.getElementById("last-name"),s=document.getElementById("email"),i=document.getElementById("message");const r=/^[a-zA-ZÀ-ÖØ-öø-ÿ]+$/;e.addEventListener("submit",(e=>{e.preventDefault(),this.checkNames(t,r)&&this.checkNames(a,r)&&this.checkEmail(s)&&this.checkMessage(i)?(t.style.border="none",a.style.border="none",s.style.border="none",i.style.border="none",this.consoleMessageValid(t,a,s,i),document.getElementById("contact-form").reset()):this.errorVerification(t,a,s,i,r)}))}consoleMessageValid(e,t,a,s){console.group("Contact Message"),console.log("Prénom : "+e.value),console.log("Nom : "+t.value),console.log("Email : "+a.value),console.log("Message : "+s.value),console.groupEnd()}errorVerification(e,t,a,s,i){this.checkNames(e,i),this.checkNames(t,i),this.checkEmail(a),this.checkMessage(s)}checkNames(e,t){return e.value.trim().length<2||""===e.value.trim()||!e.value.match(t)?(e.parentElement.setAttribute("data-error-visible","true"),e.style.border="2px solid #e54858",!1):(e.parentElement.setAttribute("data-error-visible","false"),e.style.border="solid #279e7a 0.19rem",!0)}checkEmail(e){return e.value.trim().match(regexEmail)?(e.parentElement.setAttribute("data-error-visible","false"),e.style.border="solid #279e7a 0.19rem",!0):(e.parentElement.setAttribute("data-error-visible","true"),e.style.border="2px solid #e54858",!1)}checkMessage(e){return""===e.value.trim()||null==e.value.trim()?(e.parentElement.setAttribute("data-error-visible","true"),e.style.border="2px solid #e54858",!1):(e.parentElement.setAttribute("data-error-visible","false"),e.style.border="solid #279e7a 0.19rem",!0)}}class d{getProfil(e){let t=e.photographers;const a=window.location.search.split("id=")[1],s=a?t.filter((e=>e.id==a)):t;var i="";s[0].tags.forEach((e=>{i+='<a aria-label="Tag" class="tag '+e+'" href="index.html#'+e+'"><li>'+(new r).toUpperCaseFirst(e)+"</li></a>"})),$("#profil-header").addClass("profil-header").append($('<div class="infos"></div>').append($("<h2>"+s[0].name+"</h2>"),$('<p class="city">'+s[0].city+", "+s[0].country+"</p>"),$('<p class="tagline">'+s[0].tagline+"</p>"),$('<div id="tags-profil"></div>').addClass("tags").append($("<ul></ul>").append(i))),$('<button id="contact" aria-haspopup="dialog" aria-controls="form-modal" title="Contact Me">Contactez-moi</button>'),$('<div class="image"></div>').append($('<div id="'+s[0].id+'" class="img_user '+s[0].id+'"></div>')));var l="src/Sample Photos/Photos profil/"+s[0].portrait,d=new Image;d.onload=function(){document.getElementById(s[0].id).src=d.src,d.height<=d.width?$("."+s[0].id).addClass("imgP"):d.height>d.width&&$("."+s[0].id).addClass("imgL"),$("."+s[0].id).append(d)},d.src=l,d.setAttribute("alt",""),(new n).initialize(t),(new o).validate()}}class c{createTag(e){return $("<img></img>").attr("src","src/Sample Photos/"+e.photographerId+"/"+e.image).attr("alt",e.alt).attr("role","button").addClass("media")}}class u{createTag(e){return $("<video></video>").attr("controls","controls").attr("src","src/Sample Photos/"+e.photographerId+"/"+e.video).attr("role","button").addClass("media")}}class h{getMedia(e){let t=null;return e.hasOwnProperty("image")?t=new c:e.hasOwnProperty("video")&&(t=new u),t.createTag(e)}}class p{constructor(){this.totalLike=0}getGallery(e){const t=window.location.search.split("id=")[1];let a=new h,i=[],r=[];return e.forEach((e=>{let l=a.getMedia(e);t==e.photographerId&&($("#medias").append($('<article class="media-container"></article>').append($('<a href="#" title="'+e.title+'"></a>').append($('<div class="media-div" aria-label="'+e.title+',closeup view"></div>').append(l)),$('<div class="media-infos"></div>').append($('<h2 class="media-title">'+e.title+"</h2>"),$('<div class="media-like"></div>').append($('<span class="media-like-number-'+e.id+'">'+e.likes+"</span>"),$('<i class="fas fa-heart heart-btn-'+e.id+'" aria-label="likes" role="button"></i>'))))),this.liked(e),this.totalLike+=parseInt(e.likes),i.push(l),r.push(e.title),(new s).init(i,r))})),this}liked(e){$(".heart-btn-"+e.id).on("click",(()=>{let t=$(".media-like-number-"+e.id),a=parseInt(t.text());a++,t.text(a);let s=$("#total-likes"),i=parseInt(s.text());i++,s.text(i)}))}}class m{getMedias(e){let t=e.media,a=(new p).getGallery(t);this.getLikesPrice(a.totalLike,e.photographers)}getLikesPrice(e,t){const a=window.location.search.split("id=")[1];t.forEach((t=>{a==t.id&&$("#price").append($('<span id="total-likes">'+e+"</span>"),$('<i class="fas fa-heart" aria-label="likes"></i>'),$("<span>"+t.price+" €/jour </span>"))}))}}class g{scrollButton(){window.addEventListener("scroll",(()=>{window.scrollY>=130?$("#back-home").css("display","block"):$("#back-home").css("display","none")}))}dropDownMenu(e){const t=["[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'],a=document.querySelectorAll('[aria-haspopup="listbox"]'),s=document.querySelector("#profil");let i=document.getElementsByClassName("drop-btn"),r=document.getElementsByClassName("arrow-up-close");i&&(i[0].addEventListener("click",(()=>{a.forEach((e=>{let a=document.getElementById(e.getAttribute("aria-controls"));const i=a.querySelectorAll(t),r=i[0],l=i[i.length-1];a.setAttribute("aria-hidden",!1),a.style.display="block",s.setAttribute("aria-hidden",!0),r&&window.setTimeout((()=>{r.focus(),i.forEach((e=>{e.addEventListener&&e.addEventListener("keydown",(e=>{9===e.which&&(e.shiftKey?e.target===r&&(e.preventDefault(),l.focus()):e.target===l&&(e.preventDefault(),r.focus()))}))}))}),100)}))})),this.sortMedias(e,s)),r&&r[0].addEventListener("click",(()=>{optionSort[0].style.display="none"}))}sortMedias(e,t){let a=[],s=e.media,i=document.querySelector(".drop-btn"),r=document.getElementsByClassName("option-sort");Array.from(document.getElementsByClassName("sort")).forEach(((e,l)=>e.addEventListener("click",(()=>{r[0].style.display="none",0==l?(i.innerHTML='Popularité <span class="fas fa-chevron-down" role=\'button\' aria-hidden="true"></span>',a=s.sort(((e,t)=>t.likes-e.likes))):1==l?(i.innerHTML='Date <span class="fas fa-chevron-down" role=\'button\' aria-hidden="true"></span>',a=s.sort(((e,t)=>new Date(e.date)-new Date(t.date)))):2==l&&(i.innerHTML='Titre <span class="fas fa-chevron-down" role=\'button\' aria-hidden="true"></span>',a=s.sort(((e,t)=>e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:void 0))),this.displaySortMedia(a),t.setAttribute("aria-hidden",!1)}))))}displaySortMedia(e){document.getElementById("medias").innerHTML="",(new i).getGallery(e)}selectByTags(){let e=document.querySelectorAll(".card_user");document.querySelector("#nav ul").addEventListener("click",(t=>{-1===t.target.classList.value.indexOf("activated")?t.target.classList.add("activated"):t.target.classList.remove("activated"),this.diplayArticle(e)}))}redirectedByTag(){if(""!=window.location.hash){let e=document.querySelectorAll(".card_user"),t=window.location.hash.split("#")[1];console.log(t);let a=document.getElementById(t);console.log(a.firstChild),a.firstChild.classList.add("activated"),console.log(a),this.diplayArticle(e)}}diplayArticle(e){e.forEach((e=>{this.isAvtivatedFilters(e)?e.style.display="block":e.style.display="none"}))}isAvtivatedFilters(e){let t=this.getActivatedFilters(),a=e.classList.value.split(" ");return t.filter((e=>a.includes(e))).length>=1||0==t.length}getActivatedFilters(){let e=document.querySelectorAll("#nav ul a li.activated"),t=[];return e.forEach((e=>{t.push(e.getAttribute("data-filter"))})),t}toUpperCaseFirst(e){return(e+"").charAt(0).toUpperCase()+e.substr(1)}}(new class{async getDataFishEye(){let e=await fetch("../../src/data.json"),t=await e.json();return{photographers:[...t.photographers],media:[...t.media],tags:[...t.tags]}}}).getDataFishEye().then((e=>{if(window.location.pathname.includes("/photographers.html"))return(new d).getProfil(e),(new g).dropDownMenu(e),void(new m).getMedias(e);(new l).getPhotographers(e),(new l).getTags(e),(new g).redirectedByTag()})).catch((e=>{console.error("Failed to load DataFishEye :"+e)}))})();